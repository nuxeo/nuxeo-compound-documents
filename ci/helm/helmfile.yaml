repositories:
- name: bitnami
  # use a specific version of index.yaml from the git repository as Bitnami removes all charts older than 6 months from
  # the head index.yaml descriptor, see https://github.com/bitnami/charts/issues/10539
  url: https://raw.githubusercontent.com/bitnami/charts/d2a3b454f8bb808a493d417199d3e2e09b5c650c/bitnami
- name: opensearch
  url: https://opensearch-project.github.io/helm-charts/
- name: nuxeo
  url: https://chartmuseum.platform.dev.nuxeo.com/

helmDefaults:
  timeout: 300
  wait: true

releases:
- name: mongodb
  chart: bitnami/mongodb
  version: 13.3.1
  namespace: {{ requiredEnv "NAMESPACE" }}
  condition: mongodb.enabled
  values:
  - values/values-mongodb.yaml.gotmpl
- name: opensearch
  chart: opensearch/opensearch
  version: 1.16.0
  namespace: {{ requiredEnv "NAMESPACE" }}
  condition: opensearch.enabled
  values:
  - values/values-opensearch.yaml.gotmpl
- name: kafka
  chart: bitnami/kafka
  version: 19.1.3
  namespace: {{ requiredEnv "NAMESPACE" }}
  condition: kafka.enabled
  values:
  - values/values-kafka.yaml.gotmpl

environments:
  mongodbUnitTests:
    values:
    - environments/unit-tests-mongodb.yaml
